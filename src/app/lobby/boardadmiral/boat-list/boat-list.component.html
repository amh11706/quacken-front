<div id="boatlist"
  class="container"
  [qDrag]="handle"
  [bindToWindow]="true">
  <div #handle
  class="handle"></div>
  <mat-tab-group [selectedIndex]="settings.baships.value === 2 ? 1 : 0">
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon matTooltip="Your Boats">sailing</mat-icon>
      </ng-template>
      @for (boat of filteredBoats; track boat.id) {
        <q-boat-button
          [class.highlight]="boat.showInfluence || highlightedBoats.has(boat.id)"
          [class.noCoverage]="!hasCoverage(boat)"
          [matTooltip]="hasCoverage(boat) ? '' : 'This boat has no coverage assigned!'"
          [boat]="boat"
          [fishNames]="fishNames"
          [active]="activeBoat === boat"
          (mouseover)="boat.showInfluence = true"
          (mouseout)="boat.showInfluence = false"
        (click)="selectBoat(boat)"></q-boat-button>
      }
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon matTooltip="Ship Spawning">add</mat-icon>
      </ng-template>

      @if (settings.baships.value === 2) {
        <div class="half">
          <p>Cost: {{cost}} / {{$any(settings.baships.data)?.budget < 1010
            ?
            $any(settings.baships.data).budget
            : 'âˆž'
          }}</p>
          @if (spawnBoats.length === 0) {
            <p
            class="empty">Click boat types below to spawn ships.</p>
          }
          @for (boat of spawnBoats; track boat.id) {
            <div
              class="boat">
              <span>{{ShipTypeMap.get(boat.type)?.title}}</span>
              <span class="name"
              (click)="selectBoat(boat)">{{fishNames ? boat.name : boat.title}}</span>
              <mat-icon (click)="removeBoat(boat.id)">cancel</mat-icon>
            </div>
          }
        </div>
        <div class="half">
          <q-ship-list [showList]="false"
            [ships]="boatTypes"
            [budget]="$any(settings.baships.data)?.budget"
          (shipAdd)="addBoat($event)"></q-ship-list>
        </div>
      } @else {
        <p class="empty">You can only spawn ships in influence cap mode.</p>
      }
    </mat-tab>
  </mat-tab-group>
</div>
