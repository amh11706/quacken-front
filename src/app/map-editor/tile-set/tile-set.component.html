@if (map && map.selectedTile && map.tiles && map.tileSet) {
  <div
    id="tileset"
    class="container"
    [qDrag]="handle2"
    [bindToWindow]="true">
    <div #handle2
    id="handle2"></div>
    <span>{{map.tileSet.name}}</span>
    <mat-form-field>
      <mat-label>Type</mat-label>
      <mat-select [(ngModel)]="map.tileSet.activeGroup">
        @for (type of types; track type; let i = $index) {
          <mat-option
            [value]="i">
            {{type}} @if (map.tiles[i]) {
            <span>({{map.tiles[i]?.length}})</span>
          }
        </mat-option>
      }
    </mat-select>
  </mat-form-field>
  <div id="tilebox">
    @if (map.tileSet.activeGroup !== undefined && map.tiles[map.tileSet.activeGroup]) {
      <div
        class="tiletype">
        @for (tile of map.tiles[map.tileSet.activeGroup]; track tile) {
          <div
            class="tile"
            [class.unsaved]="tile.unsaved"
            [class.selected]="tile === map.selectedTile"
            (click)="select(tile)">
            <div [matTooltip]="tile.description || ''"
              (dblclick)="editTile()">
              {{tile.name}}
            </div>
            @if (tile.weight === 0) {
              <span
                class="delete"
                (click)="deleteTile(tile)">
                X
              </span>
            }
            <div class="weight"
              matTooltip="How common this tile should be relative to the rest of the same type.">
              <mat-form-field>
                <input matInput
                  placeholder="Weight"
                  type="number"
                  max="100"
                  min="0"
                  [disabled]="pending"
                  [(ngModel)]="tile.weight"
                  (change)="saveWeight(tile)">
              </mat-form-field>
            </div>
          </div>
        }
      </div>
    } @else {
      <p>
        This tile set does not have any tiles of this type yet. Create a tile to
        get started!
      </p>
    }
  </div>
  <button mat-raised-button
  (click)="newTile()">New Tile</button>
</div>
}
